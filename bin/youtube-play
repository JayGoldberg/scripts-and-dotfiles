#!/bin/sh
vid=${1:-$(xsel)}

filename=$(youtube-dl --get-filename -- "$vid")

mkdir -p -- ~/videos/youtube
cd -- ~/videos/youtube || exit

[ -f "$filename" ] && exec mpv -- "$filename"

youtube-dl --newline -f best --no-call-home --prefer-ffmpeg -o - -- "$vid" |
    tee -- "$filename" |
    mpv -
